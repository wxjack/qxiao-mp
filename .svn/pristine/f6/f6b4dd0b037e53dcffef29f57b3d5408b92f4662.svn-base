webpackJsonp([10],{"M/+Z":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),c=s.n(a),i=s("exGp"),l=s.n(i),n=s("woOf"),r=s.n(n),o=s("+6Bu"),d=s.n(o),h=s("gyMJ"),u={namae:"noticeAdd",data:function(){return{tabIndex:0,isActive:!1,checked:!1,imagesList:[],classList:[],teacherList:[],teacherCheckList:[],classChenkList:[],openId:this.$store.getters.openId,form:{openId:this.$store.getters.openId,title:"",textContent:"",images:[{imageUrl:"http://p1.music.126.net/1xTxz-pCWqj3otOVu1nlGQ==/109951163763252770.jpg?param=338y189"}],needConfirm:!0,senders:[],sendType:2,clockType:!1,clockTime:""}}},watch:{},methods:{handleTabClick:function(e){this.tabIndex=e,0===e?(this.form.sendType=2,this.teacherCheckList=[]):1===e&&(this.form.sendType=1,this.classChenkList=[]),this.checked=!1},handleChangeSenders:function(){this.isActive=!0},handleDelImg:function(){},handleChangeFile:function(){},handleShowDatePicker:function(){var e=this;this.$weui.datePicker({start:1990,end:(new Date).getFullYear(),onConfirm:function(t){var s=t[0].label,a=t[1].label,c=t[2].label;e.form.clockTime=""+s+a+c}})},handleCheckAll:function(){var e=this,t=this.form.sendType;2===t?this.checked?this.teacherCheckList=[]:this.teacherList.forEach(function(t,s){e.teacherCheckList.push(t.teacherId)}):1===t&&(this.checked?this.classChenkList=[]:this.classList.forEach(function(t,s){e.classChenkList.push(t.classId)}))},handleSave:function(){var e=[],t=this.form.sendType;if(2===t){if(!this.teacherCheckList.length)return void this.$weui.alert("请选择发送对象班级或者老师",function(){},{title:"提示"});e=this.teacherCheckList.map(function(e){return{sendType:t,senderId:e}})}else if(1===t){if(!this.classChenkList.length)return void this.$weui.alert("请选择发送对象班级或者老师",function(){},{title:"提示"});e=this.classChenkList.map(function(e){return{sendType:t,senderId:e}})}this.form.senders=e,this.isActive=!1},handleSubmit:function(){var e=this.form,t=e.title,s=e.textContent,a=e.clockType,c=e.needConfirm,i=e.senders,l=d()(e,["title","textContent","clockType","needConfirm","senders"]);if(""!==t)if(""!==t)if(i.length){a=!1===a?0:1,c=!1===c?0:1;var n=r()({},l,{title:t,textContent:s,senders:i,clockType:a,needConfirm:c});console.log(n),this.noticeAdd(n)}else this.$weui.alert("你还没有选择发送对象",function(){},{title:"提示"});else this.$weui.alert("请输入通知内容",function(){},{title:"提示"});else this.$weui.alert("请输入通知标题",function(){},{title:"提示"})},classInfo:function(e){var t=this;return l()(c.a.mark(function e(){var s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.classInfo({openId:t.openId});case 2:0===(s=e.sent).errorCode&&(t.classList=s.data);case 4:case"end":return e.stop()}},e,t)}))()},classTeacher:function(){var e=this;return l()(c.a.mark(function t(){var s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.classTeacher({openId:e.openId});case 2:0===(s=t.sent).errorCode&&(e.teacherList=s.data);case 4:case"end":return t.stop()}},t,e)}))()},noticeAdd:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l()(c.a.mark(function s(){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.noticeAdd(t);case 2:0===s.sent.errorCode&&e.$weui.alert("发布成功",function(){e.$router.go(-1)},{title:"提示"});case 4:case"end":return s.stop()}},s,e)}))()}},mounted:function(){this.classInfo(),this.classTeacher()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagea"},[a("div",{staticClass:"panel",class:{"panel-on":e.isActive},staticStyle:{"z-index":"999"}},[a("div",{staticClass:"panel-hd"},[a("div",{staticClass:"panel-tab"},[a("a",{class:[0===e.tabIndex?"curr":""],attrs:{href:"javascript:void(0);"},on:{click:function(t){e.handleTabClick(0)}}},[e._v("老师")]),e._v(" "),a("a",{class:[1===e.tabIndex?"curr":""],attrs:{href:"javascript:void(0);"},on:{click:function(t){e.handleTabClick(1)}}},[e._v("班级")]),e._v(" "),a("a",{class:[2===e.tabIndex?"curr":""],attrs:{href:"javascript:void(0);"},on:{click:function(t){e.handleTabClick(2)}}},[e._v("老师和班级")])])]),e._v(" "),a("div",{staticClass:"panel-bd"},[a("div",{staticClass:"panel-bd_cell",style:{display:0===e.tabIndex?"block":"none"}},[a("div",{staticClass:"cells weui-cells_checkbox"},e._l(e.teacherList,function(t,s){return a("label",{key:s,staticClass:"cell item weui-check__label"},[e._m(0,!0),e._v(" "),a("div",{staticClass:"cell-bd"},[a("p",[e._v(e._s(t.teacherName))])]),e._v(" "),a("div",{staticClass:"cell-ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.teacherCheckList,expression:"teacherCheckList"}],staticClass:"weui-check",attrs:{type:"checkbox",name:"checkbox1"},domProps:{value:t.teacherId,checked:Array.isArray(e.teacherCheckList)?e._i(e.teacherCheckList,t.teacherId)>-1:e.teacherCheckList},on:{change:function(s){var a=e.teacherCheckList,c=s.target,i=!!c.checked;if(Array.isArray(a)){var l=t.teacherId,n=e._i(a,l);c.checked?n<0&&(e.teacherCheckList=a.concat([l])):n>-1&&(e.teacherCheckList=a.slice(0,n).concat(a.slice(n+1)))}else e.teacherCheckList=i}}}),e._v(" "),a("i",{staticClass:"weui-icon-checked"})])])}))]),e._v(" "),a("div",{staticClass:"panel-bd_cell",style:{display:1===e.tabIndex?"block":"none"}},[a("div",{staticClass:"cells weui-cells_checkbox"},e._l(e.classList,function(t,s){return a("label",{key:s,staticClass:"cell class-box weui-check__label"},[a("div",{staticClass:"cell-hd"}),e._v(" "),a("div",{staticClass:"cell-bd"},[a("p",[e._v(e._s(t.className))])]),e._v(" "),a("div",{staticClass:"cell-ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.classChenkList,expression:"classChenkList"}],staticClass:"weui-check",attrs:{type:"checkbox",name:"checkbox1"},domProps:{value:t.classId,checked:Array.isArray(e.classChenkList)?e._i(e.classChenkList,t.classId)>-1:e.classChenkList},on:{change:function(s){var a=e.classChenkList,c=s.target,i=!!c.checked;if(Array.isArray(a)){var l=t.classId,n=e._i(a,l);c.checked?n<0&&(e.classChenkList=a.concat([l])):n>-1&&(e.classChenkList=a.slice(0,n).concat(a.slice(n+1)))}else e.classChenkList=i}}}),e._v(" "),a("i",{staticClass:"weui-icon-checked"})])])}))])]),e._v(" "),a("div",{staticClass:"panel-ft"},[a("div",{staticClass:"tabbar weui-cells_checkbox"},[a("label",{staticClass:"weui-check__label",attrs:{id:"handle"}},[a("div",{staticClass:"cell-hd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],staticClass:"weui-check",attrs:{type:"checkbox",name:"checkedAll"},domProps:{checked:Array.isArray(e.checked)?e._i(e.checked,null)>-1:e.checked},on:{click:e.handleCheckAll,change:function(t){var s=e.checked,a=t.target,c=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&(e.checked=s.concat([null])):i>-1&&(e.checked=s.slice(0,i).concat(s.slice(i+1)))}else e.checked=c}}}),e._v(" "),a("i",{staticClass:"weui-icon-checked"})]),e._v(" "),e._m(1)]),e._v(" "),a("a",{attrs:{href:"javascript:void(0);",id:"publish"},on:{click:e.handleSave}},[e._v("确定")])])])]),e._v(" "),a("div",{staticClass:"page-bd"},[a("form",{ref:"form",attrs:{action:"",method:"post",enctype:"multipart/form-data"}},[a("div",{staticClass:"cells"},[a("div",{staticClass:"cell"},[e._m(2),e._v(" "),a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],staticClass:"input",attrs:{placeholder:"请输入通知标题",maxlength:"20"},domProps:{value:e.form.title},on:{input:function(t){t.target.composing||e.$set(e.form,"title",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"cell-bd",staticStyle:{"padding-left":"0"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.textContent,expression:"form.textContent"}],staticClass:"textarea",attrs:{placeholder:"记录下孩子的成长点滴~",rows:"6"},domProps:{value:e.form.textContent},on:{input:function(t){t.target.composing||e.$set(e.form,"textContent",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"cell-bd",staticStyle:{"padding-left":"0"}},[a("ul",{staticClass:"uploader-files"},e._l(e.imagesList,function(t,c){return a("li",{key:c,staticClass:"uploader-file",style:{backgroundImage:"url("+t+")"}},[a("img",{attrs:{src:s("+Vg6"),alt:""},on:{click:function(t){e.handleDelImg(c)}}})])})),e._v(" "),a("div",{staticClass:"uploader-input_box"},[a("input",{staticClass:"uploader-input",attrs:{name:"file",type:"file",multiple:"multiple",accept:"image/*"},on:{change:e.handleChangeFile}})])])]),e._v(" "),a("div",{staticClass:"cell"},[e._m(3),e._v(" "),a("div",{staticClass:"cell-bd"},[a("input",{staticClass:"input",attrs:{placeholder:"请选择发送对象",readonly:""},on:{click:e.handleChangeSenders}})])]),e._v(" "),a("div",{staticClass:"cell cell-switch"},[e._m(4),e._v(" "),a("div",{staticClass:"cell-ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.needConfirm,expression:"form.needConfirm"}],staticClass:"weui-switch",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.needConfirm)?e._i(e.form.needConfirm,null)>-1:e.form.needConfirm},on:{change:function(t){var s=e.form.needConfirm,a=t.target,c=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(e.form,"needConfirm",s.concat([null])):i>-1&&e.$set(e.form,"needConfirm",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.form,"needConfirm",c)}}})])]),e._v(" "),a("div",{staticClass:"cell cell-switch"},[e._m(5),e._v(" "),a("div",{staticClass:"cell-ft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.clockType,expression:"form.clockType"}],staticClass:"weui-switch",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.clockType)?e._i(e.form.clockType,null)>-1:e.form.clockType},on:{change:function(t){var s=e.form.clockType,a=t.target,c=!!a.checked;if(Array.isArray(s)){var i=e._i(s,null);a.checked?i<0&&e.$set(e.form,"clockType",s.concat([null])):i>-1&&e.$set(e.form,"clockType",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.form,"clockType",c)}}})])]),e._v(" "),e.form.clockType?[a("div",{staticClass:"cell"},[e._m(6),e._v(" "),a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.clockTime,expression:"form.clockTime"}],staticClass:"input",attrs:{placeholder:"请选择发送时间",readonly:""},domProps:{value:e.form.clockTime},on:{click:e.handleShowDatePicker,input:function(t){t.target.composing||e.$set(e.form,"clockTime",t.target.value)}}})])])]:e._e()],2)])]),e._v(" "),a("div",{staticClass:"page-ft"},[a("div",{staticClass:"btn-area"},[a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("发布")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("img",{staticClass:"teacher-icon",attrs:{src:"http://iph.href.lu/50x50",alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-bd"},[t("p",[this._v("全选")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("通知标题")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("发送对象")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-bd",staticStyle:{"padding-left":"0"}},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("是否需要确定")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-bd",staticStyle:{"padding-left":"0"}},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("是否定时发送")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("定时发送时间")])])}]};var v=s("VU/8")(u,f,!1,function(e){s("wosa")},null,null);t.default=v.exports},wosa:function(e,t){}});
//# sourceMappingURL=10.f7aa7009494b9f52cd10.js.map