webpackJsonp([6],{LkmZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAYAAAEsbBw2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAT9JREFUeNpi/P//PwMIsEw+Z74cSHsCBBDDpLNmX5iArMMAAcQIkgMKswM5zgABxAgUlgAyJoGkngMxB4jRD8SxAAEEUwcyiA2IVwHxUiYGCAgC4l9AHJBrdHINyJIpQA4vELsDsSSQ/xMggGDaVwIFfIBYBajyOUhlGMgWIOYH4t9AzMgEZbAAMTPUfAYmoPL1QNoLiH+ALAIJglz7CUgrA/EcIL4GxLJMUPO8gXgqEEsB8RuAAIPZDnL4BSDWBOKXQAzyDMi/14HYAGjFL5iHCqGKYoGCEkAsCWRHQcWywHZDTQRZdQtkLxC/hWoWBuJHQKwKMpFZ2G87yNRoqMRJILYAYi4gngfE34CY9dTzORdZoF5LBOoChRDI9CQg9Q/I/wflhwOprzCrfYGcBCA2gXoCBF4A8RkgXgjUtAkAIyht/13j5N0AAAAASUVORK5CYII="},Qjai:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),r=s("+6Bu"),o=s.n(r),l=s("Xxa5"),n=s.n(l),c=s("exGp"),d=s.n(c),u=s("gyMJ"),v=s("wEM1"),f=s("w3CS"),h={name:"schoolJoin",mixins:[v.c],data:function(){return{views:!1,schoolCode:"",info:{},form:{openId:this.$store.getters.openId,teacherName:"",schoolId:1,sex:1,tel:this.$store.getters.tel,veriftCode:""}}},methods:{handleNext:function(){""==this.schoolCode?this.$weui.alert("请输入学校ID码",function(){},{title:"提示"}):this.querySchoolInfo(this.schoolCode)},handleSubmit:function(){var e=this.form,t=e.teacherName,s=e.tel;if(""==t||!t.length)return this.$weui.alert("请输入老师姓名",function(){},{title:"提示"}),!1;Object(f.a)(s)?this.teacherJoin(this.form):this.$weui.alert("请正确填写手机号",function(){},{title:"提示"})},handleGetVeriftCode:function(){this.telVeriftCode(this.form.tel)},telVeriftCode:function(e){var t=this;return d()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.a.telVeriftCode({tel:e});case 2:0===s.sent.errorCode&&t.$weui.topTips("验证码已经发送，请注意查收");case 4:case"end":return s.stop()}},s,t)}))()},querySchoolInfo:function(e){var t=this;return d()(n.a.mark(function s(){var a,r,l,c;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.a.querySchoolInfo({schoolCode:e});case 2:0===(a=s.sent).errorCode?(r=a.data,l=r.schoolId,c=o()(r,["schoolId"]),t.views=!0,t.form.schoolId=l,t.info=i()({},c)):-1===a.errorCode&&t.$weui.alert("学校ID码有错，请联系园长",function(){},{title:"提示"});case 4:case"end":return s.stop()}},s,t)}))()},teacherJoin:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.a.teacherJoin(t);case 2:0===(a=s.sent).errorCode?(e.$store.dispatch("user/queryClassId",a.data),e.$router.push({path:"/home"})):-1===a.errorCode&&e.$weui.alert(""+a.errorMsg,function(){},{title:"提示"});case 4:case"end":return s.stop()}},s,e)}))()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page page-join"},[a("div",{staticClass:"page-hd",staticStyle:{"background-color":"transparent"}},[e.views?[a("div",{staticClass:"join-head"},[a("h2",{staticClass:"text-ellipsis text-center",attrs:{"size-18":""}},[e._v("\n          "+e._s(e.info.schoolName)+"\n          "),a("small",[e._v("(ID码: "+e._s(e.info.schoolCode)+")")])]),e._v(" "),a("div",{staticClass:"address flex text-ellipsis"},[a("img",{attrs:{src:s("LkmZ"),alt:""}}),e._v(" "),a("span",[e._v(e._s(e.info.location))])])])]:void 0],2),e._v(" "),a("div",{staticClass:"page-bd"},[e.views?[a("div",{staticClass:"cells"},[a("div",{staticClass:"cell"},[e._m(0),e._v(" "),a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.teacherName,expression:"form.teacherName"}],staticClass:"input",attrs:{placeholder:"请输入老师姓名",maxlength:"4"},domProps:{value:e.form.teacherName},on:{input:function(t){t.target.composing||e.$set(e.form,"teacherName",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"cell cell-select cell-select-after"},[e._m(1),e._v(" "),a("div",{staticClass:"cell-bd"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.sex,expression:"form.sex"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"sex",t.target.multiple?s:s[0])}}},e._l(e.sexList,function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),a("div",{staticClass:"cell"},[e._m(2),e._v(" "),a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.tel,expression:"form.tel"}],staticClass:"input",attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号",readonly:""},domProps:{value:e.form.tel},on:{input:function(t){t.target.composing||e.$set(e.form,"tel",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"cell"},[a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.veriftCode,expression:"form.veriftCode"}],staticClass:"input text-left",attrs:{placeholder:"请输入验证码",maxlength:"6"},domProps:{value:e.form.veriftCode},on:{input:function(t){t.target.composing||e.$set(e.form,"veriftCode",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"cell-ft"},[a("span",{staticStyle:{color:"#92cd36"},on:{click:e.handleGetVeriftCode}},[e._v("获取验证码")])])])])]:[a("div",{staticClass:"cells"},[a("div",{staticClass:"cell"},[a("div",{staticClass:"cell-bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.schoolCode,expression:"schoolCode"}],staticClass:"input",attrs:{type:"number",placeholder:"请输入6位数学校ID码",maxlength:"6"},domProps:{value:e.schoolCode},on:{input:function(t){t.target.composing||(e.schoolCode=t.target.value)}}})])])])]],2),e._v(" "),a("div",{staticClass:"page-ft"},[a("div",{staticClass:"btn-area"},[e.views?[a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("申请加入")])]:[a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:e.handleNext}},[e._v("下一步")])]],2)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("姓名")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("性别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("手机号码")])])}]};var p=s("VU/8")(h,m,!1,function(e){s("lasC")},null,null);t.default=p.exports},lasC:function(e,t){}});
//# sourceMappingURL=6.456304726131d8e5c28d.js.map