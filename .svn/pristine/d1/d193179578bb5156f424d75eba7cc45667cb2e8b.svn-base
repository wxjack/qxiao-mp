webpackJsonp([21],{vTJc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),l=s.n(a),r=s("exGp"),i=s.n(r),n=s("Dd8w"),c=s.n(n),o=s("gyMJ"),u=s("wEM1"),d=s("w3CS"),v=s("NYxO"),m={name:"bobySupply",mixins:[u.c,u.a],data:function(){return{classList:[],form:{openId:this.$store.getters.openId,studentName:"",sex:1,tel:"",relation:1}}},computed:c()({},Object(v.b)(["tel"])),methods:{handleSubmit:function(){var t=this.form,e=t.studentName,s=t.tel;if(""==e||!e.length)return this.$weui.alert("请输入学生姓名",function(){},{title:"提示"}),!1;Object(d.a)(s)?(console.log(this.form),this.studentSupply(this.form)):this.$weui.alert("请正确填写手机号",function(){},{title:"提示"})},queryClassByTel:function(t){var e=this;return i()(l.a.mark(function s(){var a;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.queryClassByTel({tel:t});case 2:0===(a=s.sent).errorCode&&(e.classList=a.data);case 4:case"end":return s.stop()}},s,e)}))()},studentSupply:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(l.a.mark(function s(){var a;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.studentSupply(e);case 2:0===(a=s.sent).errorCode&&(t.$refs.form.reset(),t.$store.dispatch("user/queryClassId",a.data),t.$router.push({path:"/home"}));case 4:case"end":return s.stop()}},s,t)}))()}},mounted:function(){this.form.tel=this.tel,this.queryClassByTel(this.form.tel)}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-bd"},[s("form",{ref:"form",attrs:{action:""}},[s("div",{staticClass:"cells-title"},[t._v("完善学生信息")]),t._v(" "),s("div",{staticClass:"cells"},[s("div",{staticClass:"cell"},[t._m(0),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.studentName,expression:"form.studentName"}],staticClass:"input",attrs:{placeholder:"请输入学生姓名",maxlength:"4"},domProps:{value:t.form.studentName},on:{input:function(e){e.target.composing||t.$set(t.form,"studentName",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[t._m(1),t._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.sex,expression:"form.sex"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"sex",e.target.multiple?s:s[0])}}},t._l(t.sexList,function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(2),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"input",attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号",readonly:""},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[t._m(3),t._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.relation,expression:"form.relation"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"relation",e.target.multiple?s:s[0])}}},t._l(t.relationList,function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(4),t._v(" "),s("div",{staticClass:"cell-bd"}),t._v(" "),s("div",{staticClass:"cell-ft"},t._l(t.classList,function(e,a){return s("span",{key:a},[t._v(t._s(e.className))])}))])])])]),t._v(" "),s("div",{staticClass:"page-ft"},[s("div",{staticClass:"btn-area"},[s("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:t.handleSubmit}},[t._v("提交")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label"},[this._v("学生姓名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("性别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label"},[this._v("家长手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学生和家长关系")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学生所在班级")])])}]};var p=s("VU/8")(m,f,!1,function(t){s("z74j")},"data-v-63d084f2",null);e.default=p.exports},z74j:function(t,e){}});
//# sourceMappingURL=21.6125fd02b31c70d8c6eb.js.map