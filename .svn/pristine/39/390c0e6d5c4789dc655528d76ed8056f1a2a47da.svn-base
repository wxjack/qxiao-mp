webpackJsonp([19],{Sz9q:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Xxa5"),n=e.n(a),i=e("exGp"),c=e.n(i),r=e("gyMJ"),l={name:"class",data:function(){return{schoolId:this.$store.getters.id,openId:this.$store.getters.openId,classList:[]}},methods:{handleAddClass:function(){this.$router.push({path:"/class/add"})},handleDelClass:function(s){var t=this,e=s.classId,a=s.countStudent,n=s.countTeacher;if(a>0||n>0)this.$weui.alert("班级还有关联学生或者老师不能删除班级",function(){},{title:"提示"});else this.$weui.confirm("确定要删除班级吗？",function(){t.classDelete({classId:e,openId:t.openId})},{title:"提示"})},handleEditClass:function(s){this.$router.push({path:"/class/edit/"+s})},queryClass:function(s){var t=this;return c()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.queryClass({schoolId:s});case 2:0===(a=e.sent).errorCode&&(t.classList=a.data);case 4:case"end":return e.stop()}},e,t)}))()},classDelete:function(){var s=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.classDelete(t);case 2:0===(a=e.sent).errorCode?s.queryClass(s.schoolId):-1===a.errorCode&&s.$weui.topTips(""+a.errorMsg);case 4:case"end":return e.stop()}},e,s)}))()}},activated:function(){this.queryClass(this.schoolId)}},o={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"page"},[e("div",{staticClass:"page-hd"},[e("div",{staticClass:"class-head"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/class/add"}},[s._v("添加班级")])],1)]),s._v(" "),e("div",{staticClass:"page-bd"},[e("div",{staticClass:"cells"},s._l(s.classList,function(t,a){return e("div",{key:a,staticClass:"cell class-box"},[e("div",{staticClass:"cell-bd"},[e("p",{staticClass:"text-ellipsis",attrs:{"size-17":""}},[s._v(s._s(t.className))]),s._v(" "),e("p",[e("span",{staticClass:"t",attrs:{"size-12":""}},[s._v("带班老师"+s._s(t.countTeacher)+"人")]),s._v(" "),e("span",{staticClass:"s",attrs:{"size-12":""}},[s._v("关联学生"+s._s(t.countStudent)+"人")])])]),s._v(" "),e("div",{staticClass:"cell-ft flex"},[e("a",{staticClass:"btn btn-del",attrs:{href:"javascript:;","size-12":""},on:{click:function(e){s.handleDelClass(t)}}},[s._v("删除")]),s._v(" "),e("a",{staticClass:"btn btn-edit",attrs:{href:"javascript:;","size-12":""},on:{click:function(e){s.handleEditClass(t.classId)}}},[s._v("编辑")])])])}))])])},staticRenderFns:[]};var d=e("VU/8")(l,o,!1,function(s){e("ixVg")},null,null);t.default=d.exports},ixVg:function(s,t){}});
//# sourceMappingURL=19.37f26b1a72ad2f8c70f3.js.map