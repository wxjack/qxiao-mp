webpackJsonp([24],{DdN4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),l=s.n(a),r=s("exGp"),i=s.n(r),n=s("woOf"),c=s.n(n),o=s("gyMJ"),u=s("wEM1"),d=s("w3CS"),v={name:"studentAdd",mixins:[u.c,u.a],data:function(){return{classList:[],query:{id:this.$store.getters.id,roleType:this.$store.getters.roleType},form:{openId:this.$store.getters.openId,studentName:"",sex:1,tel:"",relation:1,classId:null}}},methods:{handleSubmit:function(){var e=this.form,t=e.studentName,s=e.tel;if(""==t||!t.length)return this.$weui.topTips("请输入学生姓名"),!1;if(Object(d.a)(s)){c()({},this.form,{openId:this.openId});this.studentAdd(this.form)}else this.$weui.topTips("请正确填写手机号")},queryClassId:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(l.a.mark(function s(){var a,r;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.queryClassId(t);case 2:0===(a=s.sent).errorCode&&(r=a.data.map(function(e){return{label:e.className,value:e.classId}}),e.classList=r);case 4:case"end":return s.stop()}},s,e)}))()},studentAdd:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(l.a.mark(function s(){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.studentAdd(t);case 2:0===s.sent.errorCode&&e.$weui.alert("新增学生成功",function(){e.$refs.form.reset(),e.$router.go(-1)},{title:"提示"});case 4:case"end":return s.stop()}},s,e)}))()}},mounted:function(){this.queryClassId(this.query)}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-bd"},[s("form",{ref:"form",attrs:{action:""}},[s("div",{staticClass:"cells-title"},[e._v("基础信息")]),e._v(" "),s("div",{staticClass:"cells"},[s("div",{staticClass:"cell"},[e._m(0),e._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.studentName,expression:"form.studentName"}],staticClass:"input",attrs:{placeholder:"请输入学生姓名",maxlength:"4"},domProps:{value:e.form.studentName},on:{input:function(t){t.target.composing||e.$set(e.form,"studentName",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[e._m(1),e._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.form.sex,expression:"form.sex"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"sex",t.target.multiple?s:s[0])}}},e._l(e.sexList,function(t,a){return s("option",{key:a,domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),s("div",{staticClass:"cell"},[e._m(2),e._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.tel,expression:"form.tel"}],staticClass:"input",attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号"},domProps:{value:e.form.tel},on:{input:function(t){t.target.composing||e.$set(e.form,"tel",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[e._m(3),e._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.form.relation,expression:"form.relation"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"relation",t.target.multiple?s:s[0])}}},e._l(e.relationList,function(t,a){return s("option",{key:a,domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[e._m(4),e._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.form.classId,expression:"form.classId"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.form,"classId",t.target.multiple?s:s[0])}}},e._l(e.classList,function(t,a){return s("option",{key:a,domProps:{value:t.value}},[e._v(e._s(t.label))])}))])])])])]),e._v(" "),s("div",{staticClass:"page-ft"},[s("div",{staticClass:"btn-area"},[s("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("提交")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("学生姓名")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("性别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("家长手机号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("学生和家长关系")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("学生所在班级")])])}]};var f=s("VU/8")(v,m,!1,function(e){s("yHX3")},null,null);t.default=f.exports},yHX3:function(e,t){}});
//# sourceMappingURL=24.2e97f8e0901432b37e73.js.map