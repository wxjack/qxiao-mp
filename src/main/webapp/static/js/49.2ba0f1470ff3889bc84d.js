webpackJsonp([49],{i0HM:function(t,e){},vTJc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),l=s.n(a),r=s("exGp"),n=s.n(r),i=s("woOf"),c=s.n(i),o=s("lbHh"),u=s.n(o),d=s("gyMJ"),v=s("wEM1"),m=s("w3CS"),f={name:"bobySupply",mixins:[v.c,v.a],data:function(){return{classList:[],query:{openId:this.$store.state.wx.openId||u.a.get("openId"),tel:this.$route.query.tel},form:{}}},methods:{handleSubmit:function(){var t=this.form,e=t.studentName,s=t.tel;if(""==e||!e.length)return this.$toast("请输入学生姓名"),!1;if(Object(m.a)(s)){var a=c()({},this.form,{openId:this.query.openId});this.studentSupply(a)}else this.$toast("请正确填写手机号")},studentQuery:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n()(l.a.mark(function s(){var a;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,d.a.studentQuery(e);case 2:0===(a=s.sent).errorCode&&(t.form=a.data[0]);case 4:case"end":return s.stop()}},s,t)}))()},studentSupply:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n()(l.a.mark(function s(){var a;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,d.a.studentSupply(e);case 2:0===(a=s.sent).errorCode?(t.$refs.form.reset(),t.$store.dispatch("users/saveUserInfo",a.data),t.$store.dispatch("student/saveStudnetId",a.data.studentId),t.$store.dispatch("queryClass/queryStudentClass",{id:a.data.id,studentId:a.data.studentId}),t.$router.replace({path:"/home"})):t.$toast(""+a.errorMsg);case 4:case"end":return s.stop()}},s,t)}))()}},mounted:function(){this.studentQuery(this.query)}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-bd"},[s("form",{ref:"form",attrs:{action:""}},[s("div",{staticClass:"cells-title"},[t._v("完善学生信息")]),t._v(" "),s("div",{staticClass:"cells"},[s("div",{staticClass:"cell"},[t._m(0),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.studentName,expression:"form.studentName"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入学生姓名",maxlength:"4"},domProps:{value:t.form.studentName},on:{input:function(e){e.target.composing||t.$set(t.form,"studentName",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[t._m(1),t._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.sex,expression:"form.sex"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"sex",e.target.multiple?s:s[0])}}},t._l(t.sexList,function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(2),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"input",attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号",readonly:""},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[t._m(3),t._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.relation,expression:"form.relation"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"relation",e.target.multiple?s:s[0])}}},t._l(t.relationList,function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(4),t._v(" "),s("div",{staticClass:"cell-bd"}),t._v(" "),s("div",{staticClass:"cell-ft"},[s("p",{staticClass:"cell-p"},[t._v(t._s(t.form.className))])])])])])]),t._v(" "),s("div",{staticClass:"btn-group"},[s("a",{staticClass:"btn btn-large btn-primary",attrs:{href:"javascript:;"},on:{click:t.handleSubmit}},[t._v("提交")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label"},[this._v("学生姓名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("性别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label"},[this._v("家长手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学生和家长关系")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学生所在班级")])])}]};var h=s("VU/8")(f,p,!1,function(t){s("i0HM")},"data-v-093358f3",null);e.default=h.exports}});