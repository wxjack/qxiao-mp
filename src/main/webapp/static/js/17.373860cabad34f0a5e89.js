webpackJsonp([17],{AVmN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),l=s.n(a),i=s("+6Bu"),c=s.n(i),r=s("exGp"),n=s.n(r),o=(s("lbHh"),s("gyMJ")),d=s("wEM1"),v=s("w3CS"),m={name:"schoolCreate",mixins:[d.b],data:function(){return{views:!1,className:"",form:{schoolName:"",location:"",type:0,leadName:"",tel:this.$route.query.tel,openId:this.$route.query.openId,classes:[]}}},methods:{handleNextClick:function(){var t=this.form,e=t.schoolName,s=t.location,a=t.leadName,l=t.tel;return""!=e&&e.length?""!=s&&s.length?""!=a&&a.length?void(Object(v.a)(l)?this.views=!0:this.$toast("请正确填写手机号")):(this.$toast("请输入姓名"),!1):(this.$toast("请输入详细地址"),!1):(this.$toast("请输入名称"),!1)},handleAddClass:function(){this.className&&(this.form.classes.push({className:this.className}),this.className="")},handleDelClass:function(t){this.form.classes.splice(t,1)},handleSubmit:function(){var t=this;return n()(l.a.mark(function e(){var s,a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.classes.length){e.next=4;break}t.$toast("请至少添加一个班级，谢谢"),e.next=8;break;case 4:return e.next=6,o.a.schoolAdd(t.form);case 6:0===(s=e.sent).errorCode?(a=s.data,a.schoolCode,i=c()(a,["schoolCode"]),t.$store.dispatch("users/saveUserInfo",i),t.$store.dispatch("student/saveStudnetId",i.studentId),t.$store.dispatch("queryClass/queryClassId",{id:i.id,roleType:i.roleType}),t.$router.replace({path:"/home"})):-1===s.errorCode&&t.$toast(""+s.errorMsg);case 8:case"end":return e.stop()}},e,t)}))()}},mounted:function(){}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[t._m(0),t._v(" "),s("div",{staticClass:"page-bd"},[s("form",{ref:"form",attrs:{action:""}},[s("div",{staticClass:"cells",style:{display:t.views?"none":"block"}},[s("div",{staticClass:"cell"},[t._m(1),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.schoolName,expression:"form.schoolName"}],staticClass:"input",attrs:{placeholder:"请输入学校名称",maxlength:"30"},domProps:{value:t.form.schoolName},on:{input:function(e){e.target.composing||t.$set(t.form,"schoolName",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[t._m(2),t._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"type",e.target.multiple?s:s[0])}}},t._l(t.schoolTypeList,function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(3),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.location,expression:"form.location"}],staticClass:"input",attrs:{placeholder:"请输入详细地址",maxlength:"120"},domProps:{value:t.form.location},on:{input:function(e){e.target.composing||t.$set(t.form,"location",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(4),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.leadName,expression:"form.leadName"}],staticClass:"input",attrs:{placeholder:"请输入姓名",maxlength:"10"},domProps:{value:t.form.leadName},on:{input:function(e){e.target.composing||t.$set(t.form,"leadName",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"cell"},[t._m(5),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"input",attrs:{type:"number",placeholder:"请输入手机号",readonly:""},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"cells",style:{display:t.views?"block":"none"}},[t._m(6),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.className,expression:"className"}],staticClass:"input text-left",attrs:{placeholder:"请输入班级名称,例如: 小小班",maxlength:"20"},domProps:{value:t.className},on:{input:function(e){e.target.composing||(t.className=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"ft"},[s("div",{staticClass:"createClass",on:{click:t.handleAddClass}},[t._v("添加班级")])])])]),t._v(" "),s("div",{staticClass:"cells-title",style:{display:t.views?"block":"none"}},[t._v("已有班级列表")]),t._v(" "),s("div",{staticClass:"cells",style:{display:t.views?"block":"none"}},t._l(t.form.classes,function(e,a){return s("div",{key:a,staticClass:"cell"},[t._m(7,!0),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.className,expression:"cla.className"}],staticClass:"input text-center",attrs:{readonly:"",placeholder:"",maxlength:"20"},domProps:{value:e.className},on:{input:function(s){s.target.composing||t.$set(e,"className",s.target.value)}}})]),t._v(" "),s("div",{staticClass:"cell-ft"},[s("span",{staticStyle:{color:"#ce3c39"},on:{click:function(e){t.handleDelClass(a)}}},[t._v("删除")])])])}))])]),t._v(" "),s("div",{staticClass:"btn-group"},[t.views?t._e():s("a",{staticClass:"btn btn-large btn-primary",attrs:{hclaref:"javascript:;"},on:{click:t.handleNextClick}},[t._v("下一步")]),t._v(" "),t.views?s("a",{staticClass:"btn btn-large btn-primary",attrs:{hclaref:"javascript:;"},on:{click:t.handleSubmit}},[t._v("完成")]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-hd"},[s("div",{staticClass:"school-head"},[s("div",{staticClass:"setp flex"},[s("div",{staticClass:"circle on"},[t._v("1")]),t._v(" "),s("div",{staticClass:"line flex"},[s("span",{staticClass:"on"}),t._v(" "),s("span")]),t._v(" "),s("div",{staticClass:"circle"},[t._v("2")])]),t._v(" "),s("div",{staticClass:"stepwz flex"},[s("div",{staticClass:"s-green on"},[t._v("创建学校")]),t._v(" "),s("div",{staticClass:"s-gray"},[t._v("创建班级")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学校名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("学校类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("详细地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("姓名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{staticClass:"label",attrs:{for:""}},[this._v("手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell"},[e("div",{staticClass:"cell-bd"},[e("p",{staticClass:"p"},[this._v("\n              请编辑班级信息\n              ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cell-hd"},[e("label",{attrs:{for:""}},[this._v("班级名称:")])])}]};var p=s("VU/8")(m,u,!1,function(t){s("eWOm")},"data-v-b4412bfe",null);e.default=p.exports},eWOm:function(t,e){}});