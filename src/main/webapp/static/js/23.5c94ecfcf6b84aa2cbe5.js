webpackJsonp([23],{"4vWr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Xxa5"),s=n.n(i),a=n("exGp"),r=n.n(a),o=n("gyMJ"),c={name:"noticeShow",data:function(){return{query:{openId:this.$route.query.openId,noticeId:this.$route.query.noticeId,classId:this.$route.query.classId,studentId:this.$route.query.studentId},roleType:this.$route.query.roleType,needConfirm:parseInt(this.$route.query.needConfirm),info:{}}},methods:{handleConfirmFlag:function(){if(!this.info.confirmFlag){var e=this.query,t=e.openId,n=e.noticeId,i=e.studentId;this.noticeConfirm({openId:t,noticeId:n,studentId:i})}},handleReaders:function(e){var t={noticeId:e.noticeId,classId:this.$route.query.classId,needConfirm:this.$route.query.needConfirm};this.$router.push({path:"/notice/read",query:t})},noticeDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(s.a.mark(function n(){var i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.noticeDetail(t);case 2:0===(i=n.sent).errorCode&&(i.data.isDel?e.$dialog.alert({showConfirmButton:!1,message:"内容已被删除"}):e.info=i.data);case 4:case"end":return n.stop()}},n,e)}))()},noticeConfirm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(3!=e.roleType){n.next=5;break}return n.next=3,o.a.noticeConfirm(t);case 3:0===n.sent.errorCode&&(e.info.confirmFlag=1,e.$toast("通知确认成功"));case 5:case"end":return n.stop()}},n,e)}))()}},activated:function(){this.noticeDetail(this.query)}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-page"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!parseInt(e.info.isDel),expression:"!parseInt(info.isDel)"}],staticClass:"flex-bd"},[n("article",{staticClass:"article"},[n("h1",{attrs:{"size-24":""}},[e._v(e._s(e.info.title))]),e._v(" "),n("div",{staticClass:"article-hd"},[n("div",{staticClass:"article-cell"},[n("time",[e._v(e._s(e.info.postTime))])]),e._v(" "),n("div",{staticClass:"article-cell"},[n("van-icon",{attrs:{name:"eye-o",size:"16px"}}),e._v(" "),n("b",[e._v(e._s(e.info.classReadCount))])],1)]),e._v(" "),n("div",{staticClass:"article-content",attrs:{"size-16":""}},[n("p",{domProps:{innerHTML:e._s(e.info.textContent)}}),e._v(" "),e.info.images?e._l(e.info.images,function(e,t){return n("p",{key:t},[n("img",{attrs:{src:e.imageUrl}})])}):e._e()],2)])]),e._v(" "),n("div",{staticClass:"flex-ft"},[1==e.roleType||2==e.roleType||4==e.roleType?[n("section",{staticClass:"mamba"},[n("p",{staticStyle:{color:"#92cd36",margin:"4px 0"},attrs:{"size-16":""},on:{click:function(t){e.handleReaders(e.info)}}},[e._v("班级已读"+e._s(e.info.classReadCount)+"人，共"+e._s(e.info.totalCount)+"人，查看详情")])])]:e._e(),e._v(" "),3==e.roleType?[e.needConfirm?[n("section",{staticClass:"mamba"},[n("a",{staticClass:"btn btn-large",class:[e.info.confirmFlag?"btn-default":"btn-primary"],attrs:{href:"javascript:void(0);"},on:{click:e.handleConfirmFlag}},[e._v(e._s(e.info.confirmFlag?"已确认":"确认阅读"))])])]:e._e()]:e._e()],2)])},staticRenderFns:[]};var d=n("VU/8")(c,l,!1,function(e){n("PSyL")},"data-v-7cc67db5",null);t.default=d.exports},PSyL:function(e,t){}});