webpackJsonp([36],{F2uk:function(s,t){},Sz9q:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Xxa5"),i=e.n(a),n=e("exGp"),l=e.n(n),c=e("woOf"),o=e.n(c),r=e("gyMJ"),d={name:"class",data:function(){return{dialogVisible:!1,className:"",schoolId:this.$route.query.id,openId:this.$route.query.openId,classList:[]}},methods:{handleSubmit:function(s,t){if("confirm"===s)if(""==this.className)this.$toast("请输入班级名称"),t(!1);else{var e=o()({},{className:this.className,schoolId:this.schoolId,openId:this.openId});this.classAdd(e),t()}else t()},handleDelClass:function(s){var t=this,e=s.classId,a=s.countStudent,i=s.countTeacher;a>0||i>0?this.$toast("班级还有关联学生和老师，不能删除班级"):this.$dialog.confirm({title:"提示",message:"确定要删除班级吗？"}).then(function(){t.classDelete({classId:e,openId:t.openId})}).catch(function(){})},handleEditClass:function(s){this.$router.push({path:"/class/edit",query:{classId:s.classId,className:s.className,openId:this.openId}})},queryClass:function(s){var t=this;return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.queryClass({schoolId:s});case 2:0===(a=e.sent).errorCode&&(t.classList=a.data);case 4:case"end":return e.stop()}},e,t)}))()},classAdd:function(){var s=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.classAdd(t);case 2:0===e.sent.errorCode&&(s.className="",s.queryClass(s.schoolId));case 4:case"end":return e.stop()}},e,s)}))()},classDelete:function(){var s=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.classDelete(t);case 2:0===(a=e.sent).errorCode?s.queryClass(s.schoolId):-1===a.errorCode&&s.$weui.topTips(""+a.errorMsg);case 4:case"end":return e.stop()}},e,s)}))()}},mounted:function(){this.queryClass(this.schoolId)}},u={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"flex"},[e("div",{staticClass:"flex-bd"},[e("div",{staticClass:"class-head"},[e("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0);"},on:{click:function(t){s.dialogVisible=!0}}},[s._v("添加班级")])]),s._v(" "),e("van-dialog",{attrs:{title:"班级名称","show-cancel-button":"","before-close":s.handleSubmit},on:{cancel:function(t){s.dialogVisible=!1}},model:{value:s.dialogVisible,callback:function(t){s.dialogVisible=t},expression:"dialogVisible"}},[e("div",{staticClass:"cells",staticStyle:{padding:"15px 0 15px 0"}},[e("div",{staticClass:"cell"},[e("div",{staticClass:"cell-bd",staticStyle:{"padding-left":"0"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.className,expression:"className"}],staticClass:"input",staticStyle:{"text-align":"left"},attrs:{placeholder:"请输入班级名称",maxlength:"20"},domProps:{value:s.className},on:{input:function(t){t.target.composing||(s.className=t.target.value)}}})])])])]),s._v(" "),e("div",{staticClass:"cells mb-20"},s._l(s.classList,function(t,a){return e("div",{key:a,staticClass:"cell class-boxs",on:{click:function(e){s.handleEditClass(t)}}},[e("div",{staticClass:"cell-bd"},[e("p",{staticClass:"text-ellipsis",attrs:{"size-17":""}},[s._v(s._s(t.className))]),s._v(" "),e("p",[e("span",{staticClass:"t",attrs:{"size-12":""}},[s._v("带班老师"+s._s(t.countTeacher)+"人")]),s._v(" "),e("span",{staticClass:"s",attrs:{"size-12":""}},[s._v("关联学生"+s._s(t.countStudent)+"人")])])]),s._v(" "),e("div",{staticClass:"cell-ft"},[e("a",{staticClass:"btn btn-del",attrs:{href:"javascript:;","size-12":""},on:{click:function(e){e.stopPropagation(),s.handleDelClass(t)}}},[s._v("删除")])])])}))],1)])},staticRenderFns:[]};var h=e("VU/8")(d,u,!1,function(s){e("F2uk")},"data-v-38f82f26",null);t.default=h.exports}});