webpackJsonp([21],{Epnk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Xxa5"),s=i.n(r),a=i("exGp"),n=i.n(a),c=i("gyMJ"),o={name:"recipe",data:function(){return{long:0,time:0,query:{openId:this.$route.query.openId,studentId:this.$route.query.studentId},roleType:this.$route.query.roleType,recipeData:[]}},filters:{brReplace:function(e){return e?e.replace(/<br\/>/g,""):""}},methods:{start:function(e,t){var i=this;this.long=0,this.time=setTimeout(function(){i.long=1,1!=i.roleType&&4!=i.roleType||i.$dialog.confirm({title:"提示",message:"确定删除该条食谱吗？"}).then(n()(s.a.mark(function r(){var a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={openId:i.query.openId,recipeId:e.recipeId},r.next=3,c.a.recipeDelete(a);case 3:0===r.sent.errorCode&&i.recipeData.splice(t,1);case 5:case"end":return r.stop()}},r,i)}))).catch(function(){})},500)},move:function(){clearTimeout(this.time),this.time=0},end:function(e){return clearTimeout(this.time),0==this.long&&0!=this.time&&this.$router.push({path:"/recipe/show",query:{recipeId:e.recipeId,studentId:e.studentId}}),!1},recipeQuery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n()(s.a.mark(function i(){var r;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c.a.recipeQuery(t);case 2:0===(r=i.sent).errorCode&&(e.recipeData=r.data);case 4:case"end":return i.stop()}},i,e)}))()}},mounted:function(){this.recipeQuery(this.query)}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"page-bd"},[1==e.roleType||4==e.roleType?[r("router-link",{staticClass:"release",attrs:{to:"/recipe/add"}},[r("van-icon",{attrs:{name:"description",size:"24px"}})],1)]:e._e(),e._v(" "),e._l(e.recipeData,function(t,i){return r("figure",{key:i,staticClass:"figure figure-skin-two",on:{touchstart:function(r){e.start(t,i)},touchmove:e.move,touchend:function(i){e.end(t)}}},[r("div",{staticClass:"figure-bd"},[r("div",{staticClass:"figure-info"},[r("figcaption",{staticClass:"text-ellipsis",attrs:{"size-18":""}},[e._v(e._s(t.title))]),e._v(" "),r("div",{staticClass:"metedata flex"},[r("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),r("time",{staticClass:"time"},[e._v(e._s(t.postTime))])]),e._v(" "),t.topImage?r("div",{staticClass:"figure-thumb-medium",style:{backgroundImage:"url("+t.topImage+")"}}):e._e(),e._v(" "),r("p",{staticClass:"line-clamp"},[e._v(e._s(e._f("brReplace")(t.textContent)))])])]),e._v(" "),r("div",{staticClass:"figure-ft"},[r("div",{staticClass:"figure-icon"},[r("van-icon",{attrs:{name:"eye-o",size:"16px"}}),e._v(" "),r("b",[e._v(e._s(t.readCount))])],1)])])}),e._v(" "),e.recipeData.length?e._e():r("div",{staticClass:"empty"},[r("img",{attrs:{src:i("UHh/"),alt:""}}),e._v(" "),r("p",{attrs:{"size-18":""}},[e._v("暂无营养食谱")])])],2)])},staticRenderFns:[]};var p=i("VU/8")(o,u,!1,function(e){i("FB2K")},"data-v-a1f5b578",null);t.default=p.exports},FB2K:function(e,t){}});