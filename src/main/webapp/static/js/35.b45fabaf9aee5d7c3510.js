webpackJsonp([35],{FGLm:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),l=s("exGp"),o=s.n(l),r=s("woOf"),n=s.n(r),c=s("+6Bu"),d=s.n(c),u=s("gyMJ"),m={name:"actionAdd",mixins:[s("0wMN").a],data:function(){return{loading:!1,form:{openId:this.$route.query.openId,studentId:this.$route.query.openStudentId,title:"",textContent:"",rules:[]},dialogForm:{ruleText:"",stressFlag:!0}}},methods:{onClose:function(t){var e=this;return function(s,i){switch(s){case"right":e.$dialog.confirm({title:"提示",message:"确认要删除该行为标准吗?"}).then(function(){i.close(),e.form.rules.splice(t,1)}).catch(function(){i.close()})}}},handleSubmit:function(t,e){if("confirm"===t)if(""==this.dialogForm.ruleText)this.$toast("请输入评价标准"),e(!1);else{var s=this.dialogForm,i=s.stressFlag,a=d()(s,["stressFlag"]);i=i?1:0,this.form.rules.push(n()({},a,{stressFlag:i})),this.dialogForm.ruleText="",e()}else e()},handleSave:function(){""!=this.form.title?""!=this.form.textContent?this.form.rules.length?(this.loading=!0,this.actionAdd(this.form)):this.$toast("请给行为添加评价标准"):this.$toast("请输入行为说明"):this.$toast("请输入行为名称")},actionAdd:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o()(a.a.mark(function s(){var i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.a.actionAdd(e);case 2:0===(i=s.sent).errorCode?(t.loading=!1,t.$router.go(-1)):-1===i.errorCode&&t.$toast(""+i.errorMsg);case 4:case"end":return s.stop()}},s,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-page"},[s("div",{staticClass:"flex-bd"},[s("van-dialog",{attrs:{title:"评价标准","show-cancel-button":"","before-close":t.handleSubmit},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[s("form",{ref:"dialogForm",staticClass:"form"},[s("div",{staticClass:"form-item"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.dialogForm.ruleText,expression:"dialogForm.ruleText",modifiers:{trim:!0}}],staticClass:"textarea min-h400",attrs:{placeholder:"请输入评价标准",maxlength:"20"},domProps:{value:t.dialogForm.ruleText},on:{input:function(e){e.target.composing||t.$set(t.dialogForm,"ruleText",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),s("div",{staticClass:"form-item"},[s("van-checkbox",{model:{value:t.dialogForm.stressFlag,callback:function(e){t.$set(t.dialogForm,"stressFlag",e)},expression:"dialogForm.stressFlag"}},[t._v("是否侧重")])],1)])]),t._v(" "),s("div",{staticClass:"mod mb-30"},[s("div",{staticClass:"cells"},[s("div",{staticClass:"cell"},[s("div",{staticClass:"cell-hd"},[t._v("行为名称")]),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.title,expression:"form.title",modifiers:{trim:!0}}],staticClass:"input",attrs:{placeholder:"请输入行为名称",maxlength:"4"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"cell-hd"},[t._v("行为说明")]),t._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.textContent,expression:"form.textContent",modifiers:{trim:!0}}],staticClass:"input",attrs:{placeholder:"例如: 培养孩子坚持力",maxlength:"20"},domProps:{value:t.form.textContent},on:{input:function(e){e.target.composing||t.$set(t.form,"textContent",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])])])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"rule-list"},[s("div",{staticClass:"cells"},t._l(t.form.rules,function(e,i){return s("van-swipe-cell",{key:i,ref:"swipeCell",refInFor:!0,attrs:{"right-width":60,"on-close":t.onClose(i)}},[s("van-cell-group",[s("div",{staticClass:"cell"},[s("div",{staticClass:"cell-bd"},[s("p",[t._v(t._s(e.ruleText))])]),t._v(" "),s("div",{staticClass:"cell-ft"},[e.stressFlag?s("van-rate",{attrs:{color:"#f44","void-color":"#eee",readonly:"",count:1},model:{value:e.stressFlag,callback:function(s){t.$set(e,"stressFlag",s)},expression:"item.stressFlag"}}):t._e()],1)])]),t._v(" "),s("span",{attrs:{slot:"right"},slot:"right"},[t._v("删除")])],1)}))])],1),t._v(" "),s("div",{staticClass:"flex-ft"},[s("div",{staticClass:"tapeti"},[s("div",{staticClass:"tapeti-left"},[s("van-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增评价标准")])],1),t._v(" "),s("div",{staticClass:"tapeti-right"},[s("van-button",{attrs:{type:"info",loading:t.loading},on:{click:t.handleSave}},[t._v("添加行为")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cells-title"},[e("p",[this._v("评价标准")]),this._v(" "),e("a",{attrs:{href:"javascript:void(0);"}},[this._v("侧重")])])}]};var f=s("VU/8")(m,v,!1,function(t){s("VYc9")},"data-v-399cd516",null);e.default=f.exports},VYc9:function(t,e){}});