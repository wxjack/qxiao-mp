webpackJsonp([5],{J0S4:function(e,t){},LkmZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAYAAAEsbBw2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAT9JREFUeNpi/P//PwMIsEw+Z74cSHsCBBDDpLNmX5iArMMAAcQIkgMKswM5zgABxAgUlgAyJoGkngMxB4jRD8SxAAEEUwcyiA2IVwHxUiYGCAgC4l9AHJBrdHINyJIpQA4vELsDsSSQ/xMggGDaVwIFfIBYBajyOUhlGMgWIOYH4t9AzMgEZbAAMTPUfAYmoPL1QNoLiH+ALAIJglz7CUgrA/EcIL4GxLJMUPO8gXgqEEsB8RuAAIPZDnL4BSDWBOKXQAzyDMi/14HYAGjFL5iHCqGKYoGCEkAsCWRHQcWywHZDTQRZdQtkLxC/hWoWBuJHQKwKMpFZ2G87yNRoqMRJILYAYi4gngfE34CY9dTzORdZoF5LBOoChRDI9CQg9Q/I/wflhwOprzCrfYGcBCA2gXoCBF4A8RkgXgjUtAkAIyht/13j5N0AAAAASUVORK5CYII="},Qjai:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),o=a("woOf"),l=a.n(o),c=a("+6Bu"),d=a.n(c),u=(a("lbHh"),a("gyMJ")),v=a("wEM1"),h=(a("w3CS"),{name:"schoolJoin",mixins:[v.c],data:function(){return{query:{openId:this.$route.query.openId,tel:this.$route.query.tel},info:{}}},methods:{handleSubmit:function(){var e=this.info,t=(e.schoolCode,e.location,e.schoolName,e.teacherId,d()(e,["schoolCode","location","schoolName","teacherId"]));if(""==t.teacherName||!t.teacherName.length)return this.$toast("请输入老师姓名"),!1;var a=l()({},t,{openId:this.query.openId});this.teacherJoin(a)},queryTeacherInfoByTel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.queryTeacherInfoByTel(t);case 2:0===(s=a.sent).errorCode&&(e.info=s.data);case 4:case"end":return a.stop()}},a,e)}))()},teacherJoin:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.teacherJoin(t);case 2:0===(s=a.sent).errorCode?(e.$store.dispatch("users/saveUserInfo",s.data),e.$store.dispatch("student/saveStudnetId",s.data.studentId),e.$store.dispatch("queryClass/queryClassId",{id:s.data.id,roleType:s.data.roleType}),e.$router.replace({path:"/home"})):-1===s.errorCode&&e.$toast(""+s.errorMsg);case 4:case"end":return a.stop()}},a,e)}))()}},mounted:function(){this.queryTeacherInfoByTel(this.query)}}),f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-bd"},[e._m(0),e._v(" "),s("form",{ref:"form",staticClass:"join-form",attrs:{action:""}},[s("div",{staticClass:"join-head"},[s("h2",{staticClass:"text-ellipsis text-center",attrs:{"size-18":""}},[e._v("\n          "+e._s(e.info.schoolName)+"\n          "),s("small",[e._v("(ID码: "+e._s(e.info.schoolCode)+")")])]),e._v(" "),s("div",{staticClass:"address flex text-ellipsis"},[s("img",{attrs:{src:a("LkmZ"),alt:""}}),e._v(" "),s("span",[e._v(e._s(e.info.location))])])]),e._v(" "),s("div",{staticClass:"cells"},[s("div",{staticClass:"cell"},[e._m(1),e._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.teacherName,expression:"info.teacherName"}],staticClass:"input",attrs:{placeholder:"请输入老师姓名",maxlength:"10"},domProps:{value:e.info.teacherName},on:{input:function(t){t.target.composing||e.$set(e.info,"teacherName",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"cell cell-select cell-select-after"},[e._m(2),e._v(" "),s("div",{staticClass:"cell-bd"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.info.sex,expression:"info.sex"}],staticClass:"select",attrs:{name:"",dir:"rtl"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.info,"sex",t.target.multiple?a:a[0])}}},e._l(e.sexList,function(t,a){return s("option",{key:a,domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),s("div",{staticClass:"cell"},[e._m(3),e._v(" "),s("div",{staticClass:"cell-bd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.tel,expression:"info.tel"}],staticClass:"input",attrs:{type:"number",pattern:"[0-9]*",placeholder:"请输入手机号",readonly:""},domProps:{value:e.info.tel},on:{input:function(t){t.target.composing||e.$set(e.info,"tel",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"btn-group"},[s("a",{staticClass:"btn btn-large btn-primary",attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("申请加入")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cover"},[t("img",{attrs:{src:a("RgsF"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("姓名")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label",attrs:{for:""}},[this._v("性别")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell-hd"},[t("label",{staticClass:"label"},[this._v("手机号码")])])}]};var p=a("VU/8")(h,f,!1,function(e){a("J0S4")},"data-v-bef13d6a",null);t.default=p.exports},RgsF:function(e,t,a){e.exports=a.p+"static/img/login-bg@2x.ba33742.png"}});